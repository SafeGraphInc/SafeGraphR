<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Expands the open_hours variable in the Core file — expand_open_hours • SafeGraphR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Expands the open_hours variable in the Core file — expand_open_hours" />
<meta property="og:description" content="This function takes the open_hours variable in an already-read Core file (stored as a data.table) and expands it to seven list-type columns, where the elements of the list in each row are a set of vectors for opening/closing times, in military time format (1:30PM = 13.5). So an observation of c(8,10,12,14) would be a business that opens at 8, closes at 10, opens again at noon, and closes again at 2PM on that day. Options are available to produce long instead of wide expansions as well." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SafeGraphR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/SafeGraphR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Automatic_Traffic-over-Time_Processing.html">Automatic Traffic-over-Time Processing</a>
    </li>
    <li>
      <a href="../articles/distancing_vignette.html">Processing and Using SafeGraph Stay-at-Home Data</a>
    </li>
    <li>
      <a href="../articles/patterns_vignette.html">Processing and Using SafeGraph Patterns Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Expands the open_hours variable in the Core file</h1>
    
    <div class="hidden name"><code>expand_open_hours.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function takes the <code>open_hours</code> variable in an already-read Core file (stored as a <code>data.table</code>) and expands it to seven <code>list</code>-type columns, where the elements of the list in each row are a set of vectors for opening/closing times, in military time format (1:30PM = 13.5). So an observation of <code><a href='https://rdrr.io/r/base/c.html'>c(8,10,12,14)</a></code> would be a business that opens at 8, closes at 10, opens again at noon, and closes again at 2PM on that day. Options are available to produce long instead of wide expansions as well.</p>
    </div>

    <pre class="usage"><span class='fu'>expand_open_hours</span><span class='op'>(</span>
  <span class='va'>dt</span>,
  format <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"wide"</span>, <span class='st'>"long"</span>, <span class='st'>"long-expand"</span>, <span class='st'>"long_expand"</span><span class='op'>)</span>,
  open_hours <span class='op'>=</span> <span class='st'>"open_hours"</span>,
  colnames <span class='op'>=</span> <span class='cn'>NULL</span>,
  drop_missing <span class='op'>=</span> <span class='cn'>FALSE</span>,
  convert_hour <span class='op'>=</span> <span class='cn'>TRUE</span>,
  days <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Monday"</span>, <span class='st'>"Tuesday"</span>, <span class='st'>"Wednesday"</span>, <span class='st'>"Thursday"</span>, <span class='st'>"Friday"</span>, <span class='st'>"Saturday"</span>,
    <span class='st'>"Sunday"</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dt</th>
      <td><p>A <code>data.table</code> containing the <code>open_hours</code> column (or an object that can be coerced to a <code>data.table</code>).</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>Can be <code>'wide'</code> (seven new <code>list</code>-columns, one for each day), <code>'long'</code> (turn each row into seven rows, then two new columns: one for day-of-week and one <code>list</code>-column with opening/closing times), or <code>'long-expand'</code>/<code>'long_expand'</code> (<code>'long'</code> but then also break the single list-column out into a set of numeric start/end columns). Note that for <code>'long-expand'</code>, many locations have more than one set of open/close hours per day, so there will be more than one open/close column each.</p></td>
    </tr>
    <tr>
      <th>open_hours</th>
      <td><p>A character variable with the name of the <code>open_hours</code> column.</p></td>
    </tr>
    <tr>
      <th>colnames</th>
      <td><p>For <code>format = 'wide'</code>, the name stub for the column names, by default <code>'open_hours'</code> to get <code>'open_hoursSunday'</code>, <code>'open_hoursMonday'</code>, etc.. For <code>format='long'</code>, a two-element vector (by default <code><a href='https://rdrr.io/r/base/c.html'>c('weekday','open_hours')</a></code>) with the name of the column indicating the day, and the <code>list</code>-column with the open hours information in it. For <code>format = 'long-expand'</code>, a three-element vector with the weekday column, the name stub for "opening hour" and the name stub for "closing hour" (with numbers 1, 2, 3, etc. appended afterwards), by default <code><a href='https://rdrr.io/r/base/c.html'>c('weekday','opens','closes')</a></code>.</p></td>
    </tr>
    <tr>
      <th>drop_missing</th>
      <td><p>Drop any rows with a missing <code>open_hours</code> observation.</p></td>
    </tr>
    <tr>
      <th>convert_hour</th>
      <td><p>Convert hour strings like <code>'15:30'</code> to numbers like <code>15.5</code>. This does slow down the function.</p></td>
    </tr>
    <tr>
      <th>days</th>
      <td><p>A character vector of the days to keep. Cutting down here can save some time/memory especially if you are not going <code>format = 'wide'</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Returns the same <code>data.table</code> but with the new columns/rows added. May change the order of the data.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nick Huntington-Klein.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


