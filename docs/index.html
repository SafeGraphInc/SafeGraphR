<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Package for Processing and Analyzing SafeGraph Data • SafeGraphR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Package for Processing and Analyzing SafeGraph Data">
<meta property="og:description" content="This package is designed to make it easy to read SafeGraph files
    into R, and to perform basic preprocessing on SafeGraph data to ready it for analysis.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">SafeGraphR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/SafeGraphR.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Automatic_Traffic-over-Time_Processing.html">Automatic Traffic-over-Time Processing</a>
    </li>
    <li>
      <a href="articles/distancing_vignette.html">Processing and Using SafeGraph Stay-at-Home Data</a>
    </li>
    <li>
      <a href="articles/patterns_vignette.html">Processing and Using SafeGraph Patterns Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div class="section level1">
<div class="page-header"><h1 id="safegraphr">SafeGraphR<a class="anchor" aria-label="anchor" href="#safegraphr"></a>
</h1></div>
<p><strong>SafeGraphR</strong> is an R package designed to make it easy to read in and process data from <a href="safegraph.com">SafeGraph</a>, including data that comes through the Placekey consortium or the <a href="catalog.safegraph.io">catalog</a>. You may want to consult the <a href="https://docs.google.com/document/d/1Xx-nzOX1qF3WfOpg4D8aemwFrrAkQaJuT0-1-CbgxQs/edit" class="external-link">Quick Start Guide</a>, the <a href="https://github.com/SafeGraphInc/awesome-safegraph-datascience" class="external-link">Awesome SafeGraph Data Science List</a>, the <a href="https://colab.research.google.com/drive/16BELpcum4TKoH-5wg8Xym_CGgIGgpu1I?usp=sharing" class="external-link">Normalization Best Practices</a>, and especially the <a href="docs.safegraph.com/">SafeGraph Docs</a>.</p>
<p>You can install <strong>SafeGraphR</strong> directly from GitHub.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># if necessary</span>
<span class="co"># install.packages('remotes')</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'SafeGraphInc/SafeGraphR'</span><span class="op">)</span></code></pre></div>
<p>The other pages on this site will walk you through how you can use <strong>SafeGraphR</strong> to work with the data.</p>
</div>
<div class="section level1">
<h1 id="bugs-and-help">Bugs and Help!<a class="anchor" aria-label="anchor" href="#bugs-and-help"></a>
</h1>
<p><strong>SafeGraphR</strong> is currently in <em>beta</em>. All of its functions work, but of course there may be bugs remaining. The code has also not been checked with every possible combination of options that you could pick. Lastly, the SafeGraph data itself changes format on occasion, which may break some <strong>SafeGraphR</strong> functionality.</p>
<p>If you run into an issue or bug in the code, please raise an Issue on the <strong>SafeGraphR</strong> Github <a href="https://github.com/SafeGraphInc/SafeGraphR/issues" class="external-link">Issues page</a>.</p>
<p>If you’re just having trouble getting things to work, you can find help at the <a href="placekey-community.slack.com/">Placekey Community Slack Channel</a> in the <em>r-troubleshooting</em> room.</p>
<p>Below is a list of what’s in the package with a brief description.</p>
<div class="section level2">
<h2 id="data-reading-functions">Data Reading Functions<a class="anchor" aria-label="anchor" href="#data-reading-functions"></a>
</h2>
<p><code><a href="reference/read_core.html">read_core()</a></code>: Read in a Core Places file, which you can then merge with patterns or other data to add information about each location. There is also the older <code><a href="reference/link_poi_naics.html">link_poi_naics()</a></code> which does the same thing but can only be used to create a link between POIs and NAICS codes.</p>
<p><code><a href="reference/read_distancing.html">read_distancing()</a></code>: Given a list of dates, reads in and aggregates SafeGraph social-distancing v2 files.</p>
<p><code><a href="reference/read_many_csvs.html">read_many_csvs()</a></code>: Reads a bunch of CSVs in the same folder and row-binds them all together. Useful for stuff like normalization data.</p>
<p><code><a href="reference/read_many_patterns.html">read_many_patterns()</a></code> and <code><a href="reference/read_patterns.html">read_patterns()</a></code>: Reads a bunch of (or one, respectively) monthly or weekly patterns <code>.csv.gz</code> files all in the same folder, does appropriate processing, and row-binds the results together.</p>
<p><code><a href="reference/read_many_shop.html">read_many_shop()</a></code> and <code><a href="reference/read_shop.html">read_shop()</a></code>: Reads a bunch of (or one, respectively) <code>.zip</code> files in the format they come in from the shop and combines the data sets inside the zip across zip-files appropriately.</p>
<p><code><a href="reference/safegraph_aws.html">safegraph_aws()</a></code>: A thin wrapper for <code><a href="https://rdrr.io/pkg/aws.s3/man/sync.html" class="external-link">aws.s3::s3sync()</a></code> that downloads data from the SafeGraph AWS buckets.</p>
</div>
<div class="section level2">
<h2 id="data-processing-functions">Data Processing Functions<a class="anchor" aria-label="anchor" href="#data-processing-functions"></a>
</h2>
<p><code><a href="reference/expand_cat_json.html">expand_cat_json()</a></code> and <code><a href="reference/expand_integer_json.html">expand_integer_json()</a></code>: Take SafeGraph data with a column of categorical (named) or numeric (unnamed) JSON data and expand that column, pivot the data to long format, and then aggregate to the desired level.</p>
<p><code><a href="reference/expand_open_hours.html">expand_open_hours()</a></code>: Expand the <code>open_hours</code> variable into something easy to use!</p>
<p><code><a href="reference/fips_from_cbg.html">fips_from_cbg()</a></code>: Take a census block group identifier and extract the state and/or county FIPS codes.</p>
<p><code><a href="reference/rbind_by_list_pos.html">rbind_by_list_pos()</a></code>: Take a list of lists of <code>data.table</code>s and row-binds them by their position in the sub-list. For example, <code>rbind_by_list_pos(list(A,B),list(C,D))</code> would return <code>list(rbind(A,C),rbind(B,D))</code>. Can be used after <code>read_</code> functions, which in some cases return a list of <code>data.table</code>s for each file they read.</p>
</div>
<div class="section level2">
<h2 id="final-stages-processing-functions">Final-Stages Processing Functions<a class="anchor" aria-label="anchor" href="#final-stages-processing-functions"></a>
</h2>
<p><code><a href="reference/hb_shrink.html">hb_shrink()</a></code>: Perform hierarchical Bayesian shrinkage on the CBG-to-county or county-to-state level.</p>
<p><code><a href="reference/ma.html">ma()</a></code>: Calculates a (by default) seven day moving average on pre-sorted data with no gaps.</p>
<p><code><a href="reference/sample_size_adjust.html">sample_size_adjust()</a></code>: Adjusts data for differences in sampling rates across geographic locations.</p>
<p><code><a href="reference/scale_to_date.html">scale_to_date()</a></code>: Adjusts data to be relative to a specific date.</p>
<p><code><a href="reference/scale_yoy.html">scale_yoy()</a></code>: Adjusts data to be relative to the same date the previous year.</p>
</div>
<div class="section level2">
<h2 id="data-sets">Data Sets<a class="anchor" aria-label="anchor" href="#data-sets"></a>
</h2>
<p><code>cbg_pop</code>: Population data from the easy census file.</p>
<p><code>county_pop</code>: Population aggregated to the county level.</p>
<p><code>fips_to_names</code>: Data set linking state and county FIPS codes to state and county names, for merging in and labeling.</p>
<p><code>naics_codes</code>: Data set linking NAICS codes to NAICS code titles, for merging in and labeling (or just knowing what you’re looking at).</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>Apache 2.0</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing SafeGraphR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Nick Huntington-Klein <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-7352-3991" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Nick Huntington-Klein.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
